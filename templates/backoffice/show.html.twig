{% extends 'base.backoffice.html.twig' %}

{% block title %}Espacepartenaire{% endblock %}

{% block body %}

<div class="container" style="padding-top: 50px; padding-bottom: 50px;">
    <h1>Espacepartenaire Details</h1>

 <div class="row">
        <div class="col-md-4">
            {% if espacepartenaire.photos %}
                <img class="img-fluid mb-3" src="{{ asset('uploads/images/' ~ espacepartenaire.photos) }}" alt="Espace Image">
            {% else %}
                <img class="img-fluid mb-3" src="{{ asset('path_to_default_image.jpg') }}" alt="Default Image">
            {% endif %}
        </div>        <div class="col-md-8">
            <table class="table">
                <tbody>
                    <tr>
                        <th>IdEspace</th>
                        <td>{{ espacepartenaire.idEspace }}</td>
                    </tr>
                    <tr>
                        <th>IdUser</th>
                        <td>{{ espacepartenaire.id }}</td>
                    </tr>
                    <tr>
                        <th>Nom</th>
                        <td>{{ espacepartenaire.nom }}</td>
                    </tr>
                    <tr>
                        <th>Localisation</th>
                        <td>
                            {{ espacepartenaire.localisation }}
                            <button style="background-color: transparent; border: none;" onclick="showOnMap('{{ espacepartenaire.localisation }}')">
                                <img src="{{ asset('png-transparent-google-map-logo-google-maps-navigation-location-text-logo-sign.png') }}" alt="Map Icon" style="width: 30px; height: 30px; margin-left: 5px;">
                            </button>
                        </td>
                    </tr>
                    <tr>
                        <th>Type</th>
                        <td>{{ espacepartenaire.getIdType.nomtype }}</td>
                    </tr>
                    <tr>
                        <th>Description</th>
                        <td>{{ espacepartenaire.description }}</td>
                    </tr>
                    <tr>
                        <th>Categorie</th>
                        <td>
                            {% if espacepartenaire.getCategorie() %}
                                {% if espacepartenaire.getCategorie().isEspacecouvert() %} Espace Couvert {% endif %}
                                {% if espacepartenaire.getCategorie().isEspaceenfants() %} Espace Enfants {% endif %}
                                {% if espacepartenaire.getCategorie().isEspacefumeur() %} Espace Fumeur {% endif %}
                                {% if espacepartenaire.getCategorie().isServicerestauration() %} Service Restauration {% endif %}
                            {% else %}
                                No Category
                            {% endif %}
                        </td>
                    </tr>
                    <tr>
                        <th>Accepted</th>
                        <td>{{ espacepartenaire.accepted ? 'Yes' : 'No' }}</td>
                    </tr>
                    <tr>
                        <th>Nbclick</th>
                        <td>{{ espacepartenaire.nbclick }}</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="col-md-8">
            <div class="mt-3">
                {% if not espacepartenaire.accepted %}
                    <form action="{{ path('app_espacepartenaire_accept', {'idEspace': espacepartenaire.idEspace}) }}" method="POST">
                        <button type="submit" class="btn btn-success">Accept</button>
                    </form>
                {% endif %}

                <a href="{{ path('app_espacepartenaire') }}" class="btn btn-primary mr-2">Back to List</a>

                <form id="deleteForm_{{ espacepartenaire.idEspace }}" action="{{ path('app_espacepartenaire_delete', {'idEspace': espacepartenaire.idEspace}) }}" method="post" style="display: inline;">
                    <button type="submit" class="btn btn-danger" onclick="return confirm('Are you sure you want to delete this item?');">Delete</button>
                    <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ espacepartenaire.idEspace) }}">
                </form>
            </div>
        </div>
    </div>
</div>

<div id="map" style="height: 400px; width: 100%; margin-top: 20px;"></div>

<script>
    function showOnMap(address) {
        const geocoder = new google.maps.Geocoder();
        const map = new google.maps.Map(document.getElementById('map'), {
            zoom: 14,
            center: { lat: 0, lng: 0 } // Default center, update based on actual usage
        });

        geocoder.geocode({ address: address }, (results, status) => {
            if (status === 'OK') {
                map.setCenter(results[0].geometry.location);
                new google.maps.Marker({
                    map: map,
                    position: results[0].geometry.location
                });
            } else {
                alert('Geocode was not successful for the following reason: ' + status);
            }
        });
    }
</script>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBKbAQafF9CzI3D1HJkRgwxWywnFK8oSgM&libraries=places&callback=initialize" async defer></script>
{% endblock %}
